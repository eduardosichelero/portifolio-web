import{r as a,j as t}from"./index-DXW85gVZ.js";function E({onLogin:c}){const[l,u]=a.useState(""),[p,m]=a.useState(""),[x,b]=a.useState(""),y=async r=>{r.preventDefault(),b("");const d=await fetch("https://portifolio-api-mu.vercel.app/api/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({usuario:l,senha:p})});if(d.ok){const{token:i}=await d.json();localStorage.setItem("admin_token",i),c()}else b("Usuário ou senha inválidos")};return t.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #6366f1 0%, #a5b4fc 100%)"},children:t.jsxs("form",{onSubmit:y,style:{background:"white",borderRadius:16,boxShadow:"0 4px 24px 0 rgba(0,0,0,0.10)",padding:32,minWidth:320,display:"flex",flexDirection:"column",gap:18},children:[t.jsx("h2",{style:{textAlign:"center",color:"#3730a3",fontWeight:700,fontSize:28,marginBottom:12},children:"Painel Admin"}),t.jsx("label",{style:{fontWeight:500,color:"#4b5563"},children:"Usuário"}),t.jsx("input",{placeholder:"Digite seu usuário",value:l,onChange:r=>u(r.target.value),required:!0,style:{padding:10,borderRadius:8,border:"1px solid #d1d5db",fontSize:16}}),t.jsx("label",{style:{fontWeight:500,color:"#4b5563"},children:"Senha"}),t.jsx("input",{type:"password",placeholder:"Digite sua senha",value:p,onChange:r=>m(r.target.value),required:!0,style:{padding:10,borderRadius:8,border:"1px solid #d1d5db",fontSize:16}}),t.jsx("button",{type:"submit",style:{marginTop:10,background:"linear-gradient(90deg, #6366f1 0%, #818cf8 100%)",color:"white",border:"none",borderRadius:8,padding:"12px 0",fontWeight:600,fontSize:18,cursor:"pointer",boxShadow:"0 2px 8px 0 rgba(99,102,241,0.10)"},children:"Entrar"}),x&&t.jsx("div",{style:{color:"#dc2626",textAlign:"center",marginTop:8},children:x})]})})}function B(){const[c,l]=a.useState([]),[u,p]=a.useState([]),[m,x]=a.useState(!0),[b,y]=a.useState(()=>!!localStorage.getItem("admin_token")),[r,d]=a.useState({id:"",title:"",deadline:"",progress:0,category:""}),[i,s]=a.useState({id:"",title:"",date:"",issuer:"",progress:0,externalUrl:""}),[g,j]=a.useState(null),[h,S]=a.useState(null);a.useEffect(()=>{Promise.all([fetch("https://portifolio-api-mu.vercel.app/api/goals").then(e=>e.json()),fetch("https://portifolio-api-mu.vercel.app/api/certificates").then(e=>e.json())]).then(([e,n])=>{l(Array.isArray(e)?e:e.goals||[]),p(Array.isArray(n)?n:n.certificates||[]),x(!1)})},[]);const k=async e=>{e.preventDefault();const n=localStorage.getItem("admin_token");if(g){const o={...r,id:g};(await fetch(`https://portifolio-api-mu.vercel.app/api/goals/${g}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(o)})).ok&&(l(c.map(f=>f.id===g?o:f)),d({id:"",title:"",deadline:"",progress:0,category:""}),j(null))}else{const o={...r,id:crypto.randomUUID()};(await fetch("https://portifolio-api-mu.vercel.app/api/goals",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(o)})).ok&&(l([...c,o]),d({id:"",title:"",deadline:"",progress:0,category:""}))}},C=e=>{d(e),j(e.id)},W=async e=>{const n=localStorage.getItem("admin_token");await fetch(`https://portifolio-api-mu.vercel.app/api/goals/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${n}`}}),l(c.filter(o=>o.id!==e))},w=async e=>{e.preventDefault();const n=localStorage.getItem("admin_token");if(h){const o={...i,id:h};(await fetch(`https://portifolio-api-mu.vercel.app/api/certificates/${h}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(o)})).ok&&(p(u.map(f=>f.id===h?o:f)),s({id:"",title:"",date:"",issuer:"",progress:0,externalUrl:""}),S(null))}else{const o={...i,id:crypto.randomUUID()};(await fetch("https://portifolio-api-mu.vercel.app/api/certificates",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(o)})).ok&&(p([...u,o]),s({id:"",title:"",date:"",issuer:"",progress:0,externalUrl:""}))}},R=e=>{s(e),S(e.id)},A=async e=>{const n=localStorage.getItem("admin_token");await fetch(`https://portifolio-api-mu.vercel.app/api/certificates/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${n}`}}),p(u.filter(o=>o.id!==e))},z=()=>{localStorage.removeItem("admin_token"),window.location.reload()};return b?m?t.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #6366f1 0%, #a5b4fc 100%)",color:"#3730a3",fontSize:24,fontWeight:600},children:"Carregando..."}):t.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #6366f1 0%, #a5b4fc 100%)",padding:0},children:t.jsxs("div",{style:{maxWidth:700,margin:"40px auto",background:"white",borderRadius:18,boxShadow:"0 4px 24px 0 rgba(0,0,0,0.10)",padding:36},children:[t.jsx("button",{onClick:z,style:{float:"right",margin:8,background:"#6366f1",color:"white",border:"none",borderRadius:8,padding:"8px 18px",fontWeight:600,cursor:"pointer",boxShadow:"0 2px 8px 0 rgba(99,102,241,0.10)"},children:"Sair"}),t.jsx("h2",{style:{color:"#3730a3",fontWeight:700,fontSize:32,marginBottom:24,textAlign:"center"},children:"Painel Admin"}),t.jsx("h3",{style:{color:"#6366f1",fontWeight:600,fontSize:22,marginBottom:12},children:"Goals"}),t.jsxs("form",{onSubmit:k,style:{marginBottom:24,display:"flex",flexWrap:"wrap",gap:12},children:[t.jsx("input",{placeholder:"Título",value:r.title,onChange:e=>d({...r,title:e.target.value}),required:!0,style:{flex:1,minWidth:120,padding:8,borderRadius:8,border:"1px solid #d1d5db"}}),t.jsx("input",{placeholder:"Deadline",value:r.deadline,onChange:e=>d({...r,deadline:e.target.value}),required:!0,style:{flex:1,minWidth:120,padding:8,borderRadius:8,border:"1px solid #d1d5db"}}),t.jsx("input",{placeholder:"Categoria",value:r.category,onChange:e=>d({...r,category:e.target.value}),required:!0,style:{flex:1,minWidth:120,padding:8,borderRadius:8,border:"1px solid #d1d5db"}}),t.jsx("input",{type:"number",placeholder:"Progresso",value:r.progress,onChange:e=>d({...r,progress:Number(e.target.value)}),min:0,max:100,required:!0,style:{width:100,padding:8,borderRadius:8,border:"1px solid #d1d5db"}}),t.jsx("button",{type:"submit",style:{background:"linear-gradient(90deg, #6366f1 0%, #818cf8 100%)",color:"white",border:"none",borderRadius:8,padding:"10px 18px",fontWeight:600,fontSize:16,cursor:"pointer"},children:g?"Salvar Alteração":"Adicionar Goal"}),g&&t.jsx("button",{type:"button",onClick:()=>{j(null),d({id:"",title:"",deadline:"",progress:0,category:""})},style:{background:"#e0e7ff",color:"#3730a3",border:"none",borderRadius:8,padding:"10px 18px",fontWeight:600,fontSize:16,cursor:"pointer"},children:"Cancelar"})]}),t.jsx("ul",{style:{marginBottom:32,padding:0,listStyle:"none"},children:c.map(e=>t.jsxs("li",{style:{background:"#f3f4f6",borderRadius:10,marginBottom:10,padding:"12px 18px",display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[t.jsxs("span",{style:{fontWeight:500},children:[e.title," ",t.jsxs("span",{style:{color:"#818cf8",fontWeight:600},children:["- ",e.progress,"%"]})]}),t.jsxs("span",{children:[t.jsx("button",{onClick:()=>W(e.id),style:{background:"#dc2626",color:"white",border:"none",borderRadius:6,padding:"6px 12px",fontWeight:500,marginRight:8,cursor:"pointer"},children:"Remover"}),t.jsx("button",{onClick:()=>C(e),style:{background:"#6366f1",color:"white",border:"none",borderRadius:6,padding:"6px 12px",fontWeight:500,cursor:"pointer"},children:"Editar"})]})]},e.id))}),t.jsx("h3",{style:{color:"#6366f1",fontWeight:600,fontSize:22,marginBottom:12},children:"Certificados"}),t.jsxs("form",{onSubmit:w,style:{marginBottom:24,display:"flex",flexWrap:"wrap",gap:12},children:[t.jsx("input",{placeholder:"Título",value:i.title,onChange:e=>s({...i,title:e.target.value}),required:!0,style:{flex:1,minWidth:120,padding:8,borderRadius:8,border:"1px solid #d1d5db"}}),t.jsx("input",{placeholder:"Data",value:i.date,onChange:e=>s({...i,date:e.target.value}),required:!0,style:{flex:1,minWidth:120,padding:8,borderRadius:8,border:"1px solid #d1d5db"}}),t.jsx("input",{placeholder:"Emissor",value:i.issuer,onChange:e=>s({...i,issuer:e.target.value}),required:!0,style:{flex:1,minWidth:120,padding:8,borderRadius:8,border:"1px solid #d1d5db"}}),t.jsx("input",{type:"number",placeholder:"Progresso",value:i.progress,onChange:e=>s({...i,progress:Number(e.target.value)}),min:0,max:100,required:!0,style:{width:100,padding:8,borderRadius:8,border:"1px solid #d1d5db"}}),t.jsx("input",{placeholder:"URL externa",value:i.externalUrl,onChange:e=>s({...i,externalUrl:e.target.value}),style:{flex:2,minWidth:120,padding:8,borderRadius:8,border:"1px solid #d1d5db"}}),t.jsx("button",{type:"submit",style:{background:"linear-gradient(90deg, #6366f1 0%, #818cf8 100%)",color:"white",border:"none",borderRadius:8,padding:"10px 18px",fontWeight:600,fontSize:16,cursor:"pointer"},children:h?"Salvar Alteração":"Adicionar Certificado"}),h&&t.jsx("button",{type:"button",onClick:()=>{S(null),s({id:"",title:"",date:"",issuer:"",progress:0,externalUrl:""})},style:{background:"#e0e7ff",color:"#3730a3",border:"none",borderRadius:8,padding:"10px 18px",fontWeight:600,fontSize:16,cursor:"pointer"},children:"Cancelar"})]}),t.jsx("ul",{style:{marginBottom:0,padding:0,listStyle:"none"},children:u.map(e=>t.jsxs("li",{style:{background:"#f3f4f6",borderRadius:10,marginBottom:10,padding:"12px 18px",display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[t.jsxs("span",{style:{fontWeight:500},children:[e.title," ",t.jsxs("span",{style:{color:"#818cf8",fontWeight:600},children:["- ",e.issuer]})]}),t.jsxs("span",{children:[t.jsx("button",{onClick:()=>A(e.id),style:{background:"#dc2626",color:"white",border:"none",borderRadius:6,padding:"6px 12px",fontWeight:500,marginRight:8,cursor:"pointer"},children:"Remover"}),t.jsx("button",{onClick:()=>R(e),style:{background:"#6366f1",color:"white",border:"none",borderRadius:6,padding:"6px 12px",fontWeight:500,cursor:"pointer"},children:"Editar"})]})]},e.id))})]})}):t.jsx(E,{onLogin:()=>y(!0)})}export{B as default};
