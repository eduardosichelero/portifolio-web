import{r as a,j as r,G as L}from"./index-CkqQiVJi.js";const q="https://portifolio-api-mu.vercel.app/api";function I({onLogin:b}){const[c,p]=a.useState(""),[g,N]=a.useState(""),[k,f]=a.useState(""),h=async x=>{x.preventDefault(),f("");const y=await fetch(`${q}/auth`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({usuario:c,senha:g})});if(y.ok){const{token:d}=await y.json();sessionStorage.setItem("admin_token",d),b()}else f("Usuário ou senha inválidos")};return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background-light dark:bg-background-dark",children:r.jsxs("form",{onSubmit:h,className:"bg-white dark:bg-gray-900 rounded-2xl shadow-lg p-8 min-w-[320px] flex flex-col gap-5",children:[r.jsx("h2",{className:"text-center text-primary-light dark:text-primary-dark font-bold text-2xl mb-2",children:"Painel Admin"}),r.jsx("label",{className:"font-medium text-gray-600 dark:text-gray-300",children:"Usuário"}),r.jsx("input",{placeholder:"Digite seu usuário",value:c,onChange:x=>p(x.target.value),required:!0,className:"p-2 rounded-lg border border-border-light dark:border-border-dark text-base bg-background-light dark:bg-background-dark text-text-light dark:text-text-dark"}),r.jsx("label",{className:"font-medium text-gray-600 dark:text-gray-300",children:"Senha"}),r.jsx("input",{type:"password",placeholder:"Digite sua senha",value:g,onChange:x=>N(x.target.value),required:!0,className:"p-2 rounded-lg border border-border-light dark:border-border-dark text-base bg-background-light dark:bg-background-dark text-text-light dark:text-text-dark"}),r.jsx("button",{type:"submit",className:"mt-2 bg-primary-light dark:bg-primary-dark text-white rounded-lg py-3 font-semibold text-lg cursor-pointer shadow transition hover:bg-primary-dark dark:hover:bg-primary-light",children:"Entrar"}),k&&r.jsx("div",{className:"text-red-600 text-center mt-2",children:k})]})})}const s="https://portifolio-api-mu.vercel.app/api";function R(){const[b,c]=a.useState([]),[p,g]=a.useState([]),[N,k]=a.useState(!0),[f,h]=a.useState(!1),[x,y]=a.useState(!1),[d,n]=a.useState({id:"",title:"",deadline:"",progress:0,category:""}),[i,o]=a.useState({id:"",title:"",date:"",issuer:"",progress:0,externalUrl:""}),[u,v]=a.useState(null),[m,C]=a.useState(null),[E,j]=a.useState("");a.useEffect(()=>{fetch(`${s}/auth`,{credentials:"include"}).then(e=>{e.ok&&h(!0)}).catch(()=>h(!1)).finally(()=>y(!0)),Promise.all([fetch(`${s}/goals`).then(e=>e.json()),fetch(`${s}/certificates`).then(e=>e.json())]).then(([e,t])=>{c(Array.isArray(e)?e:e.goals||[]),g(Array.isArray(t)?t:t.certificates||[])}).finally(()=>k(!1))},[]);const A=async e=>{if(e.preventDefault(),u){const t={...d,id:u};(await fetch(`${s}/goals/${u}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"})).ok&&(c(b.map(l=>l.id===u?t:l)),n({id:"",title:"",deadline:"",progress:0,category:""}),v(null))}else{const t={...d,id:crypto.randomUUID()};(await fetch(`${s}/goals`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"})).ok&&(c([...b,t]),n({id:"",title:"",deadline:"",progress:0,category:""}))}},U=e=>{n(e),v(e.id)},$=async e=>{await fetch(`${s}/goals/${e}`,{method:"DELETE",credentials:"include"}),c(b.filter(t=>t.id!==e))},P=async e=>{e.preventDefault(),j("");try{if(m){const t={...i,id:m};if((await fetch(`${s}/certificates/${m}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"})).ok){const l=await fetch(`${s}/certificates`).then(S=>S.json());g(Array.isArray(l)?l:l.certificates||[]),o({id:"",title:"",date:"",issuer:"",progress:0,externalUrl:""}),C(null)}else j("Erro ao editar certificado.")}else{const t={...i,id:crypto.randomUUID()};if((await fetch(`${s}/certificates`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"})).ok){const l=await fetch(`${s}/certificates`).then(S=>S.json());g(Array.isArray(l)?l:l.certificates||[]),o({id:"",title:"",date:"",issuer:"",progress:0,externalUrl:""})}else j("Erro ao adicionar certificado.")}}catch{j("Erro de conexão com o servidor.")}},T=e=>{o(e),C(e.id)},G=async e=>{await fetch(`${s}/certificates/${e}`,{method:"DELETE",credentials:"include"}),g(p.filter(t=>t.id!==e))},D=async()=>{await fetch(`${s}/logout`,{method:"POST",credentials:"include"}),window.location.reload()};return!x||N?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background-light dark:bg-background-dark",children:r.jsx("div",{className:"text-primary-light dark:text-primary-dark text-2xl font-semibold",children:"Carregando..."})}):f?r.jsx("div",{className:"min-h-screen font-sans",children:r.jsxs("div",{className:"max-w-3xl mx-auto my-16 bg-transparent rounded-2xl shadow-lg p-8 flex flex-col gap-12",children:[r.jsxs("header",{className:"flex justify-between items-center mb-12",children:[r.jsx("h2",{className:"text-primary-light dark:text-primary-dark font-bold text-3xl m-0",children:"Painel Admin"}),r.jsx("button",{className:"bg-primary-light dark:bg-primary-dark text-white rounded-lg px-4 py-2 font-semibold shadow transition hover:bg-primary-dark dark:hover:bg-primary-light",onClick:D,children:"Sair"})]}),r.jsxs("section",{children:[r.jsx("h3",{className:"text-primary-light dark:text-primary-dark font-semibold text-xl mb-3",children:"Goals"}),r.jsxs("form",{className:"flex flex-wrap gap-6 mb-10",onSubmit:A,children:[r.jsx("input",{className:"flex-1 min-w-[120px] p-2 rounded-lg border border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark text-text-light dark:text-text-dark text-base",placeholder:"Título",value:d.title,onChange:e=>n({...d,title:e.target.value}),required:!0,"aria-label":"Título do Goal"}),r.jsx("input",{className:"flex-1 min-w-[120px] p-2 rounded-lg border border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark text-text-light dark:text-text-dark text-base",placeholder:"Deadline",value:d.deadline,onChange:e=>n({...d,deadline:e.target.value}),required:!0,"aria-label":"Deadline do Goal"}),r.jsxs("select",{className:"flex-1 min-w-[120px] p-2 rounded-lg border border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark text-text-light dark:text-text-dark text-base",value:d.category,onChange:e=>n({...d,category:e.target.value}),required:!0,"aria-label":"Categoria do Goal",children:[r.jsx("option",{value:"",disabled:!0,children:"Selecione a categoria"}),Object.entries(L).map(([e,t])=>r.jsx("option",{value:t,children:t},e))]}),r.jsx("input",{type:"number",className:"flex-1 min-w-[120px] p-2 rounded-lg border border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark text-text-light dark:text-text-dark text-base",placeholder:"Progresso",value:d.progress,onChange:e=>n({...d,progress:Number(e.target.value)}),min:0,max:100,required:!0,"aria-label":"Progresso do Goal"}),r.jsx("button",{type:"submit",className:"bg-primary-light dark:bg-primary-dark text-white rounded-lg px-4 py-2 font-semibold transition hover:bg-primary-dark dark:hover:bg-primary-light",children:u?"Salvar Alteração":"Adicionar Goal"}),u&&r.jsx("button",{type:"button",className:"bg-gray-200 dark:bg-gray-700 text-primary-light dark:text-primary-dark rounded-lg px-4 py-2 font-semibold",onClick:()=>{v(null),n({id:"",title:"",deadline:"",progress:0,category:""})},children:"Cancelar"})]}),r.jsx("ul",{className:"space-y-2",children:b.map(e=>r.jsxs("li",{className:"bg-background-light dark:bg-gray-800 rounded-lg p-4 flex items-center justify-between gap-2 flex-wrap border border-border-light dark:border-border-dark",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-text-light dark:text-text-dark",children:e.title}),r.jsxs("span",{className:"text-primary-light dark:text-primary-dark font-semibold ml-2",children:[e.progress,"%"]}),r.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[e.category," | ",e.deadline]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>$(e.id),className:"bg-red-600 text-white rounded px-3 py-1 font-medium",children:"Remover"}),r.jsx("button",{onClick:()=>U(e),className:"bg-primary-light dark:bg-primary-dark text-white rounded px-3 py-1 font-medium",children:"Editar"})]})]},e.id))})]}),r.jsxs("section",{children:[r.jsx("h3",{className:"text-primary-light dark:text-primary-dark font-semibold text-xl mb-3",children:"Certificados"}),r.jsxs("form",{className:"flex flex-wrap gap-6 mb-10",onSubmit:P,children:[r.jsx("input",{className:"flex-1 min-w-[120px] p-2 rounded-lg border border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark text-text-light dark:text-text-dark text-base",placeholder:"Título",value:i.title,onChange:e=>o({...i,title:e.target.value}),required:!0,"aria-label":"Título do Certificado"}),r.jsx("input",{className:"flex-1 min-w-[120px] p-2 rounded-lg border border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark text-text-light dark:text-text-dark text-base",placeholder:"Data",value:i.date,onChange:e=>o({...i,date:e.target.value}),required:!0,"aria-label":"Data do Certificado"}),r.jsx("input",{className:"flex-1 min-w-[120px] p-2 rounded-lg border border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark text-text-light dark:text-text-dark text-base",placeholder:"Emissor",value:i.issuer,onChange:e=>o({...i,issuer:e.target.value}),required:!0,"aria-label":"Emissor do Certificado"}),r.jsx("input",{type:"number",className:"flex-1 min-w-[120px] p-2 rounded-lg border border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark text-text-light dark:text-text-dark text-base",placeholder:"Progresso",value:i.progress,onChange:e=>o({...i,progress:Number(e.target.value)}),min:0,max:100,required:!0,"aria-label":"Progresso do Certificado"}),r.jsx("input",{className:"flex-1 min-w-[120px] p-2 rounded-lg border border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark text-text-light dark:text-text-dark text-base",placeholder:"URL externa",value:i.externalUrl,onChange:e=>o({...i,externalUrl:e.target.value}),"aria-label":"URL externa do Certificado"}),r.jsx("button",{type:"submit",className:"bg-primary-light dark:bg-primary-dark text-white rounded-lg px-4 py-2 font-semibold transition hover:bg-primary-dark dark:hover:bg-primary-light",children:m?"Salvar Alteração":"Adicionar Certificado"}),m&&r.jsx("button",{type:"button",className:"bg-gray-200 dark:bg-gray-700 text-primary-light dark:text-primary-dark rounded-lg px-4 py-2 font-semibold",onClick:()=>{C(null),o({id:"",title:"",date:"",issuer:"",progress:0,externalUrl:""})},children:"Cancelar"})]}),E&&r.jsx("div",{className:"text-red-600 mb-4",role:"alert",children:E}),r.jsx("ul",{className:"space-y-2",children:p.map(e=>r.jsxs("li",{className:"bg-background-light dark:bg-gray-800 rounded-lg p-4 flex items-center justify-between gap-2 flex-wrap border border-border-light dark:border-border-dark",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-text-light dark:text-text-dark",children:e.title}),r.jsx("span",{className:"text-primary-light dark:text-primary-dark font-semibold ml-2",children:e.issuer}),r.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[e.date," | ",e.progress,"% ",e.externalUrl&&r.jsx("a",{href:e.externalUrl,target:"_blank",rel:"noopener noreferrer",className:"text-primary-light dark:text-primary-dark underline ml-2",children:"Ver"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>G(e.id),className:"bg-red-600 text-white rounded px-3 py-1 font-medium",children:"Remover"}),r.jsx("button",{onClick:()=>T(e),className:"bg-primary-light dark:bg-primary-dark text-white rounded px-3 py-1 font-medium",children:"Editar"})]})]},e.id))})]})]})}):r.jsx(I,{onLogin:()=>h(!0)})}export{R as default};
