import{r as a,j as t}from"./index-B88ANmhx.js";function G({onLogin:g}){const[p,x]=a.useState(""),[u,j]=a.useState(""),[m,y]=a.useState(""),v=async r=>{r.preventDefault(),y("");const s=await fetch("https://portifolio-api-mu.vercel.app/api/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({usuario:p,senha:u})});if(s.ok){const{token:i}=await s.json();localStorage.setItem("admin_token",i),g()}else y("Usuário ou senha inválidos")};return t.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #6366f1 0%, #a5b4fc 100%)"},children:t.jsxs("form",{onSubmit:v,style:{background:"white",borderRadius:16,boxShadow:"0 4px 24px 0 rgba(0,0,0,0.10)",padding:32,minWidth:320,display:"flex",flexDirection:"column",gap:18},children:[t.jsx("h2",{style:{textAlign:"center",color:"#3730a3",fontWeight:700,fontSize:28,marginBottom:12},children:"Painel Admin"}),t.jsx("label",{style:{fontWeight:500,color:"#4b5563"},children:"Usuário"}),t.jsx("input",{placeholder:"Digite seu usuário",value:p,onChange:r=>x(r.target.value),required:!0,style:{padding:10,borderRadius:8,border:"1px solid #d1d5db",fontSize:16}}),t.jsx("label",{style:{fontWeight:500,color:"#4b5563"},children:"Senha"}),t.jsx("input",{type:"password",placeholder:"Digite sua senha",value:u,onChange:r=>j(r.target.value),required:!0,style:{padding:10,borderRadius:8,border:"1px solid #d1d5db",fontSize:16}}),t.jsx("button",{type:"submit",style:{marginTop:10,background:"linear-gradient(90deg, #6366f1 0%, #818cf8 100%)",color:"white",border:"none",borderRadius:8,padding:"12px 0",fontWeight:600,fontSize:18,cursor:"pointer",boxShadow:"0 2px 8px 0 rgba(99,102,241,0.10)"},children:"Entrar"}),m&&t.jsx("div",{style:{color:"#dc2626",textAlign:"center",marginTop:8},children:m})]})})}function O(){const[g,p]=a.useState([]),[x,u]=a.useState([]),[j,m]=a.useState(!0),[y,v]=a.useState(()=>!!localStorage.getItem("admin_token")),[r,s]=a.useState({id:"",title:"",deadline:"",progress:0,category:""}),[i,d]=a.useState({id:"",title:"",date:"",issuer:"",progress:0,externalUrl:""}),[h,S]=a.useState(null),[f,C]=a.useState(null),[A,b]=a.useState("");a.useEffect(()=>{Promise.all([fetch("https://portifolio-api-mu.vercel.app/api/goals").then(e=>e.json()),fetch("https://portifolio-api-mu.vercel.app/api/certificates").then(e=>e.json())]).then(([e,o])=>{p(Array.isArray(e)?e:e.goals||[]),u(Array.isArray(o)?o:o.certificates||[]),m(!1)})},[]);const T=async e=>{e.preventDefault();const o=localStorage.getItem("admin_token");if(h){const n={...r,id:h};(await fetch(`https://portifolio-api-mu.vercel.app/api/goals/${h}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify(n)})).ok&&(p(g.map(l=>l.id===h?n:l)),s({id:"",title:"",deadline:"",progress:0,category:""}),S(null))}else{const n={...r,id:crypto.randomUUID()};(await fetch("https://portifolio-api-mu.vercel.app/api/goals",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify(n)})).ok&&(p([...g,n]),s({id:"",title:"",deadline:"",progress:0,category:""}))}},U=e=>{s(e),S(e.id)},R=async e=>{const o=localStorage.getItem("admin_token");await fetch(`https://portifolio-api-mu.vercel.app/api/goals/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${o}`}}),p(g.filter(n=>n.id!==e))},D=async e=>{e.preventDefault(),b("");const o=localStorage.getItem("admin_token");try{if(f){const n={...i,id:f};if((await fetch(`https://portifolio-api-mu.vercel.app/api/certificates/${f}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify(n)})).ok){const l=await fetch("https://portifolio-api-mu.vercel.app/api/certificates").then(w=>w.json());u(Array.isArray(l)?l:l.certificates||[]),d({id:"",title:"",date:"",issuer:"",progress:0,externalUrl:""}),C(null)}else b("Erro ao editar certificado.")}else{const n={...i,id:crypto.randomUUID()};if((await fetch("https://portifolio-api-mu.vercel.app/api/certificates",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify(n)})).ok){const l=await fetch("https://portifolio-api-mu.vercel.app/api/certificates").then(w=>w.json());u(Array.isArray(l)?l:l.certificates||[]),d({id:"",title:"",date:"",issuer:"",progress:0,externalUrl:""})}else b("Erro ao adicionar certificado.")}}catch{b("Erro de conexão com o servidor.")}},P=e=>{d(e),C(e.id)},L=async e=>{const o=localStorage.getItem("admin_token");await fetch(`https://portifolio-api-mu.vercel.app/api/certificates/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${o}`}}),u(x.filter(n=>n.id!==e))},q=()=>{localStorage.removeItem("admin_token"),window.location.reload()};return y?j?t.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #6366f1 0%, #a5b4fc 100%)",color:"#3730a3",fontSize:24,fontWeight:600},children:"Carregando..."}):t.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #6366f1 0%, #a5b4fc 100%)",padding:0,fontFamily:"Inter, Arial, sans-serif"},children:[t.jsxs("div",{style:{maxWidth:800,margin:"40px auto",background:"white",borderRadius:18,boxShadow:"0 4px 24px 0 rgba(0,0,0,0.10)",padding:36,display:"flex",flexDirection:"column",gap:32},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[t.jsx("h2",{style:{color:"#3730a3",fontWeight:700,fontSize:32,margin:0},children:"Painel Admin"}),t.jsx("button",{onClick:q,style:{background:"#6366f1",color:"white",border:"none",borderRadius:8,padding:"8px 18px",fontWeight:600,cursor:"pointer",boxShadow:"0 2px 8px 0 rgba(99,102,241,0.10)"},children:"Sair"})]}),t.jsxs("section",{children:[t.jsx("h3",{style:{color:"#6366f1",fontWeight:600,fontSize:22,marginBottom:12},children:"Goals"}),t.jsxs("form",{onSubmit:T,style:{marginBottom:24,display:"flex",flexWrap:"wrap",gap:12},children:[t.jsx("input",{placeholder:"Título",value:r.title,onChange:e=>s({...r,title:e.target.value}),required:!0,style:c}),t.jsx("input",{placeholder:"Deadline",value:r.deadline,onChange:e=>s({...r,deadline:e.target.value}),required:!0,style:c}),t.jsx("input",{placeholder:"Categoria",value:r.category,onChange:e=>s({...r,category:e.target.value}),required:!0,style:c}),t.jsx("input",{type:"number",placeholder:"Progresso",value:r.progress,onChange:e=>s({...r,progress:Number(e.target.value)}),min:0,max:100,required:!0,style:{...c,width:100}}),t.jsx("button",{type:"submit",style:E,children:h?"Salvar Alteração":"Adicionar Goal"}),h&&t.jsx("button",{type:"button",onClick:()=>{S(null),s({id:"",title:"",deadline:"",progress:0,category:""})},style:W,children:"Cancelar"})]}),t.jsx("ul",{style:{marginBottom:32,padding:0,listStyle:"none"},children:g.map(e=>t.jsxs("li",{style:B,children:[t.jsxs("div",{style:{flex:1},children:[t.jsx("span",{style:{fontWeight:500},children:e.title}),t.jsxs("span",{style:{color:"#818cf8",fontWeight:600,marginLeft:8},children:[e.progress,"%"]}),t.jsxs("div",{style:{fontSize:13,color:"#6b7280",marginTop:2},children:[e.category," | ",e.deadline]})]}),t.jsxs("div",{style:{display:"flex",gap:8},children:[t.jsx("button",{onClick:()=>R(e.id),style:I,children:"Remover"}),t.jsx("button",{onClick:()=>U(e),style:z,children:"Editar"})]})]},e.id))})]}),t.jsxs("section",{children:[t.jsx("h3",{style:{color:"#6366f1",fontWeight:600,fontSize:22,marginBottom:12},children:"Certificados"}),t.jsxs("form",{onSubmit:D,style:{marginBottom:24,display:"flex",flexWrap:"wrap",gap:12},children:[t.jsx("input",{placeholder:"Título",value:i.title,onChange:e=>d({...i,title:e.target.value}),required:!0,style:c}),t.jsx("input",{placeholder:"Data",value:i.date,onChange:e=>d({...i,date:e.target.value}),required:!0,style:c}),t.jsx("input",{placeholder:"Emissor",value:i.issuer,onChange:e=>d({...i,issuer:e.target.value}),required:!0,style:c}),t.jsx("input",{type:"number",placeholder:"Progresso",value:i.progress,onChange:e=>d({...i,progress:Number(e.target.value)}),min:0,max:100,required:!0,style:{...c,width:100}}),t.jsx("input",{placeholder:"URL externa",value:i.externalUrl,onChange:e=>d({...i,externalUrl:e.target.value}),style:{...c,flex:2}}),t.jsx("button",{type:"submit",style:E,children:f?"Salvar Alteração":"Adicionar Certificado"}),f&&t.jsx("button",{type:"button",onClick:()=>{C(null),d({id:"",title:"",date:"",issuer:"",progress:0,externalUrl:""})},style:W,children:"Cancelar"})]}),A&&t.jsx("div",{style:{color:"#dc2626",marginBottom:16},children:A}),t.jsx("ul",{style:{marginBottom:0,padding:0,listStyle:"none"},children:x.map(e=>t.jsxs("li",{style:B,children:[t.jsxs("div",{style:{flex:1},children:[t.jsx("span",{style:{fontWeight:500},children:e.title}),t.jsx("span",{style:{color:"#818cf8",fontWeight:600,marginLeft:8},children:e.issuer}),t.jsxs("div",{style:{fontSize:13,color:"#6b7280",marginTop:2},children:[e.date," | ",e.progress,"% ",e.externalUrl&&t.jsx("a",{href:e.externalUrl,target:"_blank",rel:"noopener noreferrer",style:{color:"#6366f1",marginLeft:8,textDecoration:"underline"},children:"Ver"})]})]}),t.jsxs("div",{style:{display:"flex",gap:8},children:[t.jsx("button",{onClick:()=>L(e.id),style:I,children:"Remover"}),t.jsx("button",{onClick:()=>P(e),style:z,children:"Editar"})]})]},e.id))})]})]}),t.jsx("style",{children:`
        @media (max-width: 600px) {
          .admin-panel-card {
            padding: 12px !important;
          }
          .admin-panel-form {
            flex-direction: column !important;
            gap: 8px !important;
          }
        }
        `})]}):t.jsx(G,{onLogin:()=>v(!0)})}const c={flex:1,minWidth:120,padding:8,borderRadius:8,border:"1px solid #d1d5db",fontSize:15,background:"#f9fafb"},E={background:"linear-gradient(90deg, #6366f1 0%, #818cf8 100%)",color:"white",border:"none",borderRadius:8,padding:"10px 18px",fontWeight:600,fontSize:16,cursor:"pointer"},W={background:"#e0e7ff",color:"#3730a3",border:"none",borderRadius:8,padding:"10px 18px",fontWeight:600,fontSize:16,cursor:"pointer"},I={background:"#dc2626",color:"white",border:"none",borderRadius:6,padding:"6px 12px",fontWeight:500,marginRight:0,cursor:"pointer"},z={background:"#6366f1",color:"white",border:"none",borderRadius:6,padding:"6px 12px",fontWeight:500,cursor:"pointer"},B={background:"#f3f4f6",borderRadius:10,marginBottom:10,padding:"12px 18px",display:"flex",alignItems:"center",justifyContent:"space-between",gap:8};export{O as default};
