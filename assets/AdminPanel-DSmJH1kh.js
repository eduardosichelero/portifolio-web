import{r as s,j as t}from"./index-sgu8bZ23.js";function E(){const[d,p]=s.useState([]),[u,c]=s.useState([]),[f,x]=s.useState(!0),[a,o]=s.useState({id:"",title:"",deadline:"",progress:0,category:""}),[i,l]=s.useState({id:"",title:"",date:"",issuer:"",progress:0,externalUrl:""}),[n,h]=s.useState(null);s.useEffect(()=>{Promise.all([fetch("https://portifolio-api-mu.vercel.app/api/goals").then(e=>e.json()),fetch("https://portifolio-api-mu.vercel.app/api/certificates").then(e=>e.json())]).then(([e,r])=>{p(Array.isArray(e)?e:e.goals||[]),c(Array.isArray(r)?r:r.certificates||[]),x(!1)})},[]);const j=async e=>{if(e.preventDefault(),n){const r={...a,id:n};(await fetch(`https://portifolio-api-mu.vercel.app/api/goals/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok&&(p(d.map(m=>m.id===n?r:m)),o({id:"",title:"",deadline:"",progress:0,category:""}),h(null))}else{const r={...a,id:crypto.randomUUID()};(await fetch("https://portifolio-api-mu.vercel.app/api/goals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok&&(p([...d,r]),o({id:"",title:"",deadline:"",progress:0,category:""}))}},v=e=>{o(e),h(e.id)},y=async e=>{await fetch(`https://portifolio-api-mu.vercel.app/api/goals/${e}`,{method:"DELETE"}),p(d.filter(r=>r.id!==e))},C=async e=>{e.preventDefault();const r={...i,id:crypto.randomUUID()};(await fetch("https://portifolio-api-eduardosichelero.vercel.app/api/certificates",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok&&(c([...u,r]),l({id:"",title:"",date:"",issuer:"",progress:0,externalUrl:""}))},b=async e=>{await fetch(`https://portifolio-api-eduardosichelero.vercel.app/api/certificates/${e}`,{method:"DELETE"}),c(u.filter(r=>r.id!==e))};return f?t.jsx("div",{children:"Carregando..."}):t.jsxs("div",{children:[t.jsx("h2",{children:"Painel Admin"}),t.jsx("h3",{children:"Goals"}),t.jsxs("form",{onSubmit:j,style:{marginBottom:16},children:[t.jsx("input",{placeholder:"Título",value:a.title,onChange:e=>o({...a,title:e.target.value}),required:!0}),t.jsx("input",{placeholder:"Deadline",value:a.deadline,onChange:e=>o({...a,deadline:e.target.value}),required:!0}),t.jsx("input",{placeholder:"Categoria",value:a.category,onChange:e=>o({...a,category:e.target.value}),required:!0}),t.jsx("input",{type:"number",placeholder:"Progresso",value:a.progress,onChange:e=>o({...a,progress:Number(e.target.value)}),min:0,max:100,required:!0}),t.jsx("button",{type:"submit",children:n?"Salvar Alteração":"Adicionar Goal"}),n&&t.jsx("button",{type:"button",onClick:()=>{h(null),o({id:"",title:"",deadline:"",progress:0,category:""})},children:"Cancelar"})]}),t.jsx("ul",{children:d.map(e=>t.jsxs("li",{children:[e.title," - ",e.progress,"%",t.jsx("button",{onClick:()=>y(e.id),children:"Remover"}),t.jsx("button",{onClick:()=>v(e),children:"Editar"})]},e.id))}),t.jsx("h3",{children:"Certificados"}),t.jsxs("form",{onSubmit:C,style:{marginBottom:16},children:[t.jsx("input",{placeholder:"Título",value:i.title,onChange:e=>l({...i,title:e.target.value}),required:!0}),t.jsx("input",{placeholder:"Data",value:i.date,onChange:e=>l({...i,date:e.target.value}),required:!0}),t.jsx("input",{placeholder:"Emissor",value:i.issuer,onChange:e=>l({...i,issuer:e.target.value}),required:!0}),t.jsx("input",{type:"number",placeholder:"Progresso",value:i.progress,onChange:e=>l({...i,progress:Number(e.target.value)}),min:0,max:100,required:!0}),t.jsx("input",{placeholder:"URL externa",value:i.externalUrl,onChange:e=>l({...i,externalUrl:e.target.value})}),t.jsx("button",{type:"submit",children:"Adicionar Certificado"})]}),t.jsx("ul",{children:u.map(e=>t.jsxs("li",{children:[e.title," - ",e.issuer,t.jsx("button",{onClick:()=>b(e.id),children:"Remover"})]},e.id))})]})}export{E as default};
