import{r as s,j as t}from"./index-DCuGaM8u.js";function y(){const[n,d]=s.useState([]),[u,p]=s.useState([]),[c,h]=s.useState(!0),[i,l]=s.useState({id:"",title:"",deadline:"",progress:0,category:""}),[r,o]=s.useState({id:"",title:"",date:"",issuer:"",progress:0,externalUrl:""});s.useEffect(()=>{Promise.all([fetch("https://portifolio-api-eduardosichelero.vercel.app/api/goals").then(e=>e.json()),fetch("https://portifolio-api-eduardosichelero.vercel.app/api/certificates").then(e=>e.json())]).then(([e,a])=>{d(e),p(a),h(!1)})},[]);const g=async e=>{e.preventDefault();const a={...i,id:crypto.randomUUID()};(await fetch("https://portifolio-api-eduardosichelero.vercel.app/api/goals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok&&(d([...n,a]),l({id:"",title:"",deadline:"",progress:0,category:""}))},m=async e=>{await fetch(`https://portifolio-api-eduardosichelero.vercel.app/api/goals/${e}`,{method:"DELETE"}),d(n.filter(a=>a.id!==e))},x=async e=>{e.preventDefault();const a={...r,id:crypto.randomUUID()};(await fetch("https://portifolio-api-eduardosichelero.vercel.app/api/certificates",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok&&(p([...u,a]),o({id:"",title:"",date:"",issuer:"",progress:0,externalUrl:""}))},f=async e=>{await fetch(`https://portifolio-api-eduardosichelero.vercel.app/api/certificates/${e}`,{method:"DELETE"}),p(u.filter(a=>a.id!==e))};return c?t.jsx("div",{children:"Carregando..."}):t.jsxs("div",{children:[t.jsx("h2",{children:"Painel Admin"}),t.jsx("h3",{children:"Goals"}),t.jsxs("form",{onSubmit:g,style:{marginBottom:16},children:[t.jsx("input",{placeholder:"Título",value:i.title,onChange:e=>l({...i,title:e.target.value}),required:!0}),t.jsx("input",{placeholder:"Deadline",value:i.deadline,onChange:e=>l({...i,deadline:e.target.value}),required:!0}),t.jsx("input",{placeholder:"Categoria",value:i.category,onChange:e=>l({...i,category:e.target.value}),required:!0}),t.jsx("input",{type:"number",placeholder:"Progresso",value:i.progress,onChange:e=>l({...i,progress:Number(e.target.value)}),min:0,max:100,required:!0}),t.jsx("button",{type:"submit",children:"Adicionar Goal"})]}),t.jsx("ul",{children:n.map(e=>t.jsxs("li",{children:[e.title," - ",e.progress,"%",t.jsx("button",{onClick:()=>m(e.id),children:"Remover"})]},e.id))}),t.jsx("h3",{children:"Certificados"}),t.jsxs("form",{onSubmit:x,style:{marginBottom:16},children:[t.jsx("input",{placeholder:"Título",value:r.title,onChange:e=>o({...r,title:e.target.value}),required:!0}),t.jsx("input",{placeholder:"Data",value:r.date,onChange:e=>o({...r,date:e.target.value}),required:!0}),t.jsx("input",{placeholder:"Emissor",value:r.issuer,onChange:e=>o({...r,issuer:e.target.value}),required:!0}),t.jsx("input",{type:"number",placeholder:"Progresso",value:r.progress,onChange:e=>o({...r,progress:Number(e.target.value)}),min:0,max:100,required:!0}),t.jsx("input",{placeholder:"URL externa",value:r.externalUrl,onChange:e=>o({...r,externalUrl:e.target.value})}),t.jsx("button",{type:"submit",children:"Adicionar Certificado"})]}),t.jsx("ul",{children:u.map(e=>t.jsxs("li",{children:[e.title," - ",e.issuer,t.jsx("button",{onClick:()=>f(e.id),children:"Remover"})]},e.id))})]})}export{y as default};
