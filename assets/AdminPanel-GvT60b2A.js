import{r as d,j as t}from"./index-BkstKBIV.js";function R({onLogin:l}){const[s,g]=d.useState(""),[p,x]=d.useState(""),[h,f]=d.useState(""),b=async r=>{r.preventDefault(),f("");const a=await fetch("https://portifolio-api-mu.vercel.app/api/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({usuario:s,senha:p})});if(a.ok){const{token:o}=await a.json();localStorage.setItem("admin_token",o),l()}else f("Usuário ou senha inválidos")};return t.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #6366f1 0%, #a5b4fc 100%)"},children:t.jsxs("form",{onSubmit:b,style:{background:"white",borderRadius:16,boxShadow:"0 4px 24px 0 rgba(0,0,0,0.10)",padding:32,minWidth:320,display:"flex",flexDirection:"column",gap:18},children:[t.jsx("h2",{style:{textAlign:"center",color:"#3730a3",fontWeight:700,fontSize:28,marginBottom:12},children:"Painel Admin"}),t.jsx("label",{style:{fontWeight:500,color:"#4b5563"},children:"Usuário"}),t.jsx("input",{placeholder:"Digite seu usuário",value:s,onChange:r=>g(r.target.value),required:!0,style:{padding:10,borderRadius:8,border:"1px solid #d1d5db",fontSize:16}}),t.jsx("label",{style:{fontWeight:500,color:"#4b5563"},children:"Senha"}),t.jsx("input",{type:"password",placeholder:"Digite sua senha",value:p,onChange:r=>x(r.target.value),required:!0,style:{padding:10,borderRadius:8,border:"1px solid #d1d5db",fontSize:16}}),t.jsx("button",{type:"submit",style:{marginTop:10,background:"linear-gradient(90deg, #6366f1 0%, #818cf8 100%)",color:"white",border:"none",borderRadius:8,padding:"12px 0",fontWeight:600,fontSize:18,cursor:"pointer",boxShadow:"0 2px 8px 0 rgba(99,102,241,0.10)"},children:"Entrar"}),h&&t.jsx("div",{style:{color:"#dc2626",textAlign:"center",marginTop:8},children:h})]})})}function z(){const[l,s]=d.useState([]),[g,p]=d.useState([]),[x,h]=d.useState(!0),[f,b]=d.useState(()=>!!localStorage.getItem("admin_token")),[r,a]=d.useState({id:"",title:"",deadline:"",progress:0,category:""}),[o,c]=d.useState({id:"",title:"",date:"",issuer:"",progress:0,externalUrl:""}),[u,m]=d.useState(null);d.useEffect(()=>{Promise.all([fetch("https://portifolio-api-mu.vercel.app/api/goals").then(e=>e.json()),fetch("https://portifolio-api-mu.vercel.app/api/certificates").then(e=>e.json())]).then(([e,i])=>{s(Array.isArray(e)?e:e.goals||[]),p(Array.isArray(i)?i:i.certificates||[]),h(!1)})},[]);const S=async e=>{e.preventDefault();const i=localStorage.getItem("admin_token");if(u){const n={...r,id:u};(await fetch(`https://portifolio-api-mu.vercel.app/api/goals/${u}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify(n)})).ok&&(s(l.map(j=>j.id===u?n:j)),a({id:"",title:"",deadline:"",progress:0,category:""}),m(null))}else{const n={...r,id:crypto.randomUUID()};(await fetch("https://portifolio-api-mu.vercel.app/api/goals",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify(n)})).ok&&(s([...l,n]),a({id:"",title:"",deadline:"",progress:0,category:""}))}},v=e=>{a(e),m(e.id)},k=async e=>{const i=localStorage.getItem("admin_token");await fetch(`https://portifolio-api-mu.vercel.app/api/goals/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${i}`}}),s(l.filter(n=>n.id!==e))},C=async e=>{e.preventDefault();const i=localStorage.getItem("admin_token"),n={...o,id:crypto.randomUUID()};(await fetch("https://portifolio-api-mu.vercel.app/api/certificates",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify(n)})).ok&&(p([...g,n]),c({id:"",title:"",date:"",issuer:"",progress:0,externalUrl:""}))},W=async e=>{const i=localStorage.getItem("admin_token");await fetch(`https://portifolio-api-mu.vercel.app/api/certificates/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${i}`}}),p(g.filter(n=>n.id!==e))},w=()=>{localStorage.removeItem("admin_token"),window.location.reload()};return f?x?t.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #6366f1 0%, #a5b4fc 100%)",color:"#3730a3",fontSize:24,fontWeight:600},children:"Carregando..."}):t.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #6366f1 0%, #a5b4fc 100%)",padding:0},children:t.jsxs("div",{style:{maxWidth:700,margin:"40px auto",background:"white",borderRadius:18,boxShadow:"0 4px 24px 0 rgba(0,0,0,0.10)",padding:36},children:[t.jsx("button",{onClick:w,style:{float:"right",margin:8,background:"#6366f1",color:"white",border:"none",borderRadius:8,padding:"8px 18px",fontWeight:600,cursor:"pointer",boxShadow:"0 2px 8px 0 rgba(99,102,241,0.10)"},children:"Sair"}),t.jsx("h2",{style:{color:"#3730a3",fontWeight:700,fontSize:32,marginBottom:24,textAlign:"center"},children:"Painel Admin"}),t.jsx("h3",{style:{color:"#6366f1",fontWeight:600,fontSize:22,marginBottom:12},children:"Goals"}),t.jsxs("form",{onSubmit:S,style:{marginBottom:24,display:"flex",flexWrap:"wrap",gap:12},children:[t.jsx("input",{placeholder:"Título",value:r.title,onChange:e=>a({...r,title:e.target.value}),required:!0,style:{flex:1,minWidth:120,padding:8,borderRadius:8,border:"1px solid #d1d5db"}}),t.jsx("input",{placeholder:"Deadline",value:r.deadline,onChange:e=>a({...r,deadline:e.target.value}),required:!0,style:{flex:1,minWidth:120,padding:8,borderRadius:8,border:"1px solid #d1d5db"}}),t.jsx("input",{placeholder:"Categoria",value:r.category,onChange:e=>a({...r,category:e.target.value}),required:!0,style:{flex:1,minWidth:120,padding:8,borderRadius:8,border:"1px solid #d1d5db"}}),t.jsx("input",{type:"number",placeholder:"Progresso",value:r.progress,onChange:e=>a({...r,progress:Number(e.target.value)}),min:0,max:100,required:!0,style:{width:100,padding:8,borderRadius:8,border:"1px solid #d1d5db"}}),t.jsx("button",{type:"submit",style:{background:"linear-gradient(90deg, #6366f1 0%, #818cf8 100%)",color:"white",border:"none",borderRadius:8,padding:"10px 18px",fontWeight:600,fontSize:16,cursor:"pointer"},children:u?"Salvar Alteração":"Adicionar Goal"}),u&&t.jsx("button",{type:"button",onClick:()=>{m(null),a({id:"",title:"",deadline:"",progress:0,category:""})},style:{background:"#e0e7ff",color:"#3730a3",border:"none",borderRadius:8,padding:"10px 18px",fontWeight:600,fontSize:16,cursor:"pointer"},children:"Cancelar"})]}),t.jsx("ul",{style:{marginBottom:32,padding:0,listStyle:"none"},children:l.map(e=>t.jsxs("li",{style:{background:"#f3f4f6",borderRadius:10,marginBottom:10,padding:"12px 18px",display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[t.jsxs("span",{style:{fontWeight:500},children:[e.title," ",t.jsxs("span",{style:{color:"#818cf8",fontWeight:600},children:["- ",e.progress,"%"]})]}),t.jsxs("span",{children:[t.jsx("button",{onClick:()=>k(e.id),style:{background:"#dc2626",color:"white",border:"none",borderRadius:6,padding:"6px 12px",fontWeight:500,marginRight:8,cursor:"pointer"},children:"Remover"}),t.jsx("button",{onClick:()=>v(e),style:{background:"#6366f1",color:"white",border:"none",borderRadius:6,padding:"6px 12px",fontWeight:500,cursor:"pointer"},children:"Editar"})]})]},e.id))}),t.jsx("h3",{style:{color:"#6366f1",fontWeight:600,fontSize:22,marginBottom:12},children:"Certificados"}),t.jsxs("form",{onSubmit:C,style:{marginBottom:24,display:"flex",flexWrap:"wrap",gap:12},children:[t.jsx("input",{placeholder:"Título",value:o.title,onChange:e=>c({...o,title:e.target.value}),required:!0,style:{flex:1,minWidth:120,padding:8,borderRadius:8,border:"1px solid #d1d5db"}}),t.jsx("input",{placeholder:"Data",value:o.date,onChange:e=>c({...o,date:e.target.value}),required:!0,style:{flex:1,minWidth:120,padding:8,borderRadius:8,border:"1px solid #d1d5db"}}),t.jsx("input",{placeholder:"Emissor",value:o.issuer,onChange:e=>c({...o,issuer:e.target.value}),required:!0,style:{flex:1,minWidth:120,padding:8,borderRadius:8,border:"1px solid #d1d5db"}}),t.jsx("input",{type:"number",placeholder:"Progresso",value:o.progress,onChange:e=>c({...o,progress:Number(e.target.value)}),min:0,max:100,required:!0,style:{width:100,padding:8,borderRadius:8,border:"1px solid #d1d5db"}}),t.jsx("input",{placeholder:"URL externa",value:o.externalUrl,onChange:e=>c({...o,externalUrl:e.target.value}),style:{flex:2,minWidth:120,padding:8,borderRadius:8,border:"1px solid #d1d5db"}}),t.jsx("button",{type:"submit",style:{background:"linear-gradient(90deg, #6366f1 0%, #818cf8 100%)",color:"white",border:"none",borderRadius:8,padding:"10px 18px",fontWeight:600,fontSize:16,cursor:"pointer"},children:"Adicionar Certificado"})]}),t.jsx("ul",{style:{marginBottom:0,padding:0,listStyle:"none"},children:g.map(e=>t.jsxs("li",{style:{background:"#f3f4f6",borderRadius:10,marginBottom:10,padding:"12px 18px",display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[t.jsxs("span",{style:{fontWeight:500},children:[e.title," ",t.jsxs("span",{style:{color:"#818cf8",fontWeight:600},children:["- ",e.issuer]})]}),t.jsx("button",{onClick:()=>W(e.id),style:{background:"#dc2626",color:"white",border:"none",borderRadius:6,padding:"6px 12px",fontWeight:500,cursor:"pointer"},children:"Remover"})]},e.id))})]})}):t.jsx(R,{onLogin:()=>b(!0)})}export{z as default};
